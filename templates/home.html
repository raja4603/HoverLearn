{% extends 'base.html' %}

{% block content %}
<style>
    /* HERO SECTION (The Big Banner) */
   .hero {
        height: 85vh;
        width: 100%;
    
        background: linear-gradient(to right, rgba(0,0,0,0.9) 20%, rgba(0,0,0,0) 80%),
                    url('{{ videos.0.thumbnail.url }}'); 
        background-size: cover;
        background-position: center top;
        display: flex;
        align-items: center;
        padding-left: 50px;
    }
    
    .hero-content {
        max-width: 600px;
        margin-top: 50px;
    }

    .hero-title {
        font-size: 80px;
        font-weight: 700;
        margin-bottom: 20px;
        line-height: 1;
    }

    .hero-desc {
        font-size: 18px;
        color: #e5e5e5;
        margin-bottom: 30px;
        text-shadow: 2px 2px 4px rgba(0,0,0,0.5);
    }

    /* BUTTON STYLES */
    .btn {
        padding: 12px 30px;
        border-radius: 4px;
        font-weight: bold;
        font-size: 18px;
        cursor: pointer;
        display: inline-flex;
        align-items: center;
        gap: 10px;
        text-decoration: none; /* Remove underline from link */
    }

    .btn-white { 
        background: white; 
        color: black; 
        border: none; 
    }
    .btn-white:hover { background: rgba(255, 255, 255, 0.75); }

    .btn-gray { 
        background: rgba(109, 109, 110, 0.7); 
        color: white; 
        border: none; 
        margin-left: 10px; 
    }
    .btn-gray:hover { background: rgba(109, 109, 110, 0.4); }

    /* THUMBNAIL GRID */
    .row-title {
        font-size: 24px;
        font-weight: bold;
        color: #e5e5e5;
        margin: 20px 50px 10px 50px;
    }

    .video-row {
        display: flex;
        overflow-x: auto;
        padding: 0 50px 50px 50px;
        gap: 10px;
    }
    
    .video-card {
        min-width: 250px;
        height: 140px;
        background-color: #333;
        border-radius: 4px;
        overflow: hidden;
        position: relative;
        transition: transform 0.3s ease;
        cursor: pointer;
    }

    .video-card:hover {
        transform: scale(1.1);
        z-index: 10;
        box-shadow: 0 0 20px rgba(0,0,0,0.8);
    }

    .video-card img { width: 100%; height: 100%; object-fit: cover; }
    
    .video-info {
        position: absolute;
        bottom: 0;
        background: rgba(0,0,0,0.8);
        width: 100%;
        padding: 10px;
        font-size: 14px;
        opacity: 0;
        transition: opacity 0.2s;
    }
    
    .video-card:hover .video-info { opacity: 1; }

</style>

<!-- 1. HERO BANNER -->
<div class="hero">
    <div class="hero-content">
        {% if videos %}
        <h1 class="hero-title">{{ videos.0.title }}</h1>
        <p class="hero-desc">{{ videos.0.description|default:"No description available." }}</p>
        {% else %}
        <h1 class="hero-title">Welcome to HoverLearn</h1>
        <p class="hero-desc">Upload videos to get started.</p>
        {% endif %}
        <div>
            <!-- FIX: We check if there are videos, and link to the FIRST one (videos.0.id) -->
            {% if videos %}
                <a href="{% url 'watch' videos.0.id %}" class="btn btn-white">
                    <span>▶</span> Play
                </a>
            {% else %}
                <!-- Fallback if no videos exist yet -->
                <button class="btn btn-white" onclick="alert('Please upload a video in Admin Panel first!')">
                    <span>▶</span> Play
                </button>
            {% endif %}

            <button class="btn btn-gray">
                <span>ⓘ</span> More Info
            </button>
        </div>
    </div>
</div>

<!-- 2. CONTINUE WATCHING ROW -->
<div class="row-title">Latest Movies</div>
<div class="video-row">
    {% for video in videos %}
    <a href="{% url 'watch' video.id %}">
        <div class="video-card">
            {% if video.thumbnail %}
                <img src="{{ video.thumbnail.url }}" alt="{{ video.title }}">
            {% else %}
                <div style="height:100%; display:flex; align-items:center; justify-content:center; color:#666;">No Image</div>
            {% endif %}
            <div class="video-info">{{ video.title }}</div>
        </div>
    </a>
    {% endfor %}
</div>

{% endblock %}